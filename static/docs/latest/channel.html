

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Channels &mdash; Nextflow 19.04.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Nextflow 19.04.0 documentation" href="index.html"/>
        <link rel="next" title="Operators" href="operator.html"/>
        <link rel="prev" title="Processes" href="process.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Nextflow
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Get started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">Nextflow scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Channels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#channel-types">Channel types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#queue-channel">Queue channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#value-channel">Value channel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channel-factory">Channel factory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create">create</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from">from</a></li>
<li class="toctree-l3"><a class="reference internal" href="#value">value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frompath">fromPath</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fromfilepairs">fromFilePairs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fromsra">fromSRA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#watchpath">watchPath</a></li>
<li class="toctree-l3"><a class="reference internal" href="#empty">empty</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#binding-values">Binding values</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bind">bind( )</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operator">operator &lt;&lt;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#observing-events">Observing events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subscribe">subscribe( )</a></li>
<li class="toctree-l3"><a class="reference internal" href="#onnext-oncomplete-and-onerror">onNext, onComplete, and onError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="awscloud.html">Amazon Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">Amazon S3 storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity.html">Singularity containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Mail &amp; Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Nextflow</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Channels</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="channels">
<span id="channel-page"></span><h1>Channels<a class="headerlink" href="#channels" title="Permalink to this headline">¶</a></h1>
<p>Nextflow is based on the Dataflow programming model in which processes communicate through channels.</p>
<p>A channel has two major properties:</p>
<ol class="arabic simple">
<li>Sending a message is an <cite>asynchronous</cite> operation which completes immediately,
without having to wait for the receiving process.</li>
<li>Receiving data is a blocking operation which stops the receiving process until the message has arrived.</li>
</ol>
<div class="section" id="channel-types">
<span id="id1"></span><h2>Channel types<a class="headerlink" href="#channel-types" title="Permalink to this headline">¶</a></h2>
<p>Nextflow distinguish two different kinds of channels: <cite>queue channels</cite> and <cite>value channels</cite>.</p>
<div class="section" id="queue-channel">
<h3>Queue channel<a class="headerlink" href="#queue-channel" title="Permalink to this headline">¶</a></h3>
<p>A <cite>queue channel</cite> is a non-blocking unidirectional FIFO queue which connects two processes or operators.</p>
<p>A queue channel is usually created using a factory method such as a <a class="reference internal" href="#from">from</a>, <a class="reference internal" href="#frompath">fromPath</a>, etc.
or chaining it with a channel operator such as <a class="reference internal" href="operator.html#operator-map"><span class="std std-ref">map</span></a>, <a class="reference internal" href="operator.html#operator-flatmap"><span class="std std-ref">flatMap</span></a>, etc.</p>
<p>Queue channels are also created by process output declarations using the <code class="docutils literal"><span class="pre">into</span></code> clause.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The definition implies that the same queue channel cannot be used more than one time as process
output and more then one time as process input.</p>
</div>
<p>In you need to connect a process output channel to more then one process or operator use the
<a class="reference internal" href="operator.html#operator-into"><span class="std std-ref">into</span></a> operator to create two (or more) copies of the same channel and use each
of them to connect a separate process.</p>
</div>
<div class="section" id="value-channel">
<h3>Value channel<a class="headerlink" href="#value-channel" title="Permalink to this headline">¶</a></h3>
<p>A <cite>value channel</cite> a.k.a. <em>singleton channel</em> by definition is bound to a single value and it can be read
unlimited times without consuming its content.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For this reason a value channel can be used as input by more than one process.</p>
</div>
<p>A value channel is created using the <a class="reference internal" href="#value">value</a> factory method or by operators returning
a single value, such us <a class="reference internal" href="operator.html#operator-first"><span class="std std-ref">first</span></a>, <a class="reference internal" href="operator.html#operator-last"><span class="std std-ref">last</span></a>, <a class="reference internal" href="operator.html#operator-collect"><span class="std std-ref">collect</span></a>,
<a class="reference internal" href="operator.html#operator-count"><span class="std std-ref">count</span></a>, <a class="reference internal" href="operator.html#operator-min"><span class="std std-ref">min</span></a>, <a class="reference internal" href="operator.html#operator-max"><span class="std std-ref">max</span></a>, <a class="reference internal" href="operator.html#operator-reduce"><span class="std std-ref">reduce</span></a>, <a class="reference internal" href="operator.html#operator-sum"><span class="std std-ref">sum</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A value channel is implicitly created by a process when an input specifies a simple value
in the <code class="docutils literal"><span class="pre">from</span></code> clause.
Moreover, a value channel is also implicitly created as output for a process whose
inputs are only value channels.</p>
</div>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">process</span> <span class="n">foo</span> <span class="p">{</span>
  <span class="nb">input</span><span class="p">:</span>
  <span class="n">val</span> <span class="n">x</span> <span class="kn">from</span> <span class="mi">1</span>
  <span class="n">output</span><span class="p">:</span>
  <span class="n">file</span> <span class="s1">&#39;x.txt&#39;</span> <span class="n">into</span> <span class="n">result</span>

  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  echo $x &gt; x.txt</span>
<span class="sd">  &quot;&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The process in the above snippet declare a single input which implicitly is a value channel.
Therefore also the <code class="docutils literal"><span class="pre">result</span></code> output is a value channel that can be read by more than one process.</p>
<p>See also: <a class="reference internal" href="process.html#process-understand-how-multiple-input-channels-work"><span class="std std-ref">Understand how multiple input channels work</span></a>.</p>
</div>
</div>
<div class="section" id="channel-factory">
<span id="id2"></span><h2>Channel factory<a class="headerlink" href="#channel-factory" title="Permalink to this headline">¶</a></h2>
<p>Channels may be created implicitly by the process output(s) declaration or explicitly using the following channel
factory methods.</p>
<p>The available factory methods are:</p>
<ul class="simple">
<li><a class="reference internal" href="#create">create</a></li>
<li><a class="reference internal" href="#empty">empty</a></li>
<li><a class="reference internal" href="#from">from</a></li>
<li><a class="reference internal" href="#frompath">fromPath</a></li>
<li><a class="reference internal" href="#fromfilepairs">fromFilePairs</a></li>
<li><a class="reference internal" href="#fromsra">fromSRA</a></li>
<li><a class="reference internal" href="#value">value</a></li>
<li><a class="reference internal" href="#watchpath">watchPath</a></li>
</ul>
<div class="section" id="create">
<span id="channel-create"></span><h3>create<a class="headerlink" href="#create" title="Permalink to this headline">¶</a></h3>
<p>Creates a new <cite>channel</cite> by using the <code class="docutils literal"><span class="pre">create</span></code> method, as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">channelObj</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="from">
<span id="channel-from"></span><h3>from<a class="headerlink" href="#from" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">from</span></code> method allows you to create a channel emitting any sequence of values that are specified as the method argument,
for example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span> <span class="p">)</span>
<span class="n">ch</span><span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span> <span class="n">println</span> <span class="s2">&quot;value: $it&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The first line in this example creates a variable <code class="docutils literal"><span class="pre">ch</span></code> which holds a channel object. This channel emits the values
specified as a parameter in the <code class="docutils literal"><span class="pre">from</span></code> method. Thus the second line will print the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">value</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">value</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">value</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">value</span><span class="p">:</span> <span class="mi">7</span>
</pre></div>
</div>
<p>The following example shows how to create a channel from a <cite>range</cite> of numbers or strings:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">zeroToNine</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="mf">0.</span><span class="o">.</span><span class="mi">9</span> <span class="p">)</span>
<span class="n">strings</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="s1">&#39;A&#39;</span><span class="o">..</span><span class="s1">&#39;Z&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that when the <code class="docutils literal"><span class="pre">from</span></code> argument is an object implementing the (Java)
<a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html">Collection</a> interface, the resulting channel
emits the collection entries as individual emissions.</p>
</div>
<p>Thus the following two declarations produce an identical result even tough in the first case the items are specified
as multiple arguments while in the second case as a single list object argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span> <span class="p">)</span>
<span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>But when more than one argument is provided, they are always managed as <cite>single</cite> emissions. Thus, the following example
creates a channel emitting three entries each of which is a list containing two elements:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="value">
<span id="channel-value"></span><h3>value<a class="headerlink" href="#value" title="Permalink to this headline">¶</a></h3>
<p>The <cite>value</cite> factory method is used to create a <em>value</em> channel. An optional not <code class="docutils literal"><span class="pre">null</span></code> argument
can be specified to bind the channel to a specific value. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">expl1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
<span class="n">expl2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">value</span><span class="p">(</span> <span class="s1">&#39;Hello there&#39;</span> <span class="p">)</span>
<span class="n">expl3</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">value</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first line in the example creates an 'empty' variable. The second line creates a channel and binds a string to it.
Finally the last one creates a channel and binds a list object to it that will be emitted as a sole emission.</p>
</div>
<div class="section" id="frompath">
<span id="channel-path"></span><h3>fromPath<a class="headerlink" href="#frompath" title="Permalink to this headline">¶</a></h3>
<p>You can create a channel emitting one or more file paths by using the <code class="docutils literal"><span class="pre">fromPath</span></code> method and specifying a path string
as an argument. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myFileChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/data/some/bigfile.txt&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>The above line creates a channel and binds to it a <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html">Path</a>
item referring the specified file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It does not check the file existence.</p>
</div>
<p>Whenever the <code class="docutils literal"><span class="pre">fromPath</span></code> argument contains a <code class="docutils literal"><span class="pre">*</span></code> or <code class="docutils literal"><span class="pre">?</span></code> wildcard character it is interpreted as a <a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob">glob</a> path matcher.
For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myFileChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/data/big/*.txt&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>This example creates a channel and emits as many <code class="docutils literal"><span class="pre">Path</span></code> items as there are files with <code class="docutils literal"><span class="pre">txt</span></code> extension in the <code class="docutils literal"><span class="pre">/data/big</span></code> folder.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Two asterisks, i.e. <code class="docutils literal"><span class="pre">**</span></code>, works like <code class="docutils literal"><span class="pre">*</span></code> but crosses directory boundaries.
This syntax is generally used for matching complete paths. Curly brackets specify a collection of sub-patterns.</p>
</div>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">files</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;data/**.fa&#39;</span> <span class="p">)</span>
<span class="n">moreFiles</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;data/**/*.fa&#39;</span> <span class="p">)</span>
<span class="n">pairFiles</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;data/file_{1,2}.fq&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first line returns a channel emitting the files ending with the suffix <code class="docutils literal"><span class="pre">.fa</span></code> in the <code class="docutils literal"><span class="pre">data</span></code> folder <cite>and</cite> recursively
in all its sub-folders. While the second one only emits the files which have the same suffix in <cite>any</cite> sub-folder in the <code class="docutils literal"><span class="pre">data</span></code> path.
Finally the last example emits two files: <code class="docutils literal"><span class="pre">data/file_1.fq</span></code> and <code class="docutils literal"><span class="pre">data/file_2.fq</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As in Linux Bash the <code class="docutils literal"><span class="pre">*</span></code> wildcard does not match against hidden files (i.e. files whose name start with a <code class="docutils literal"><span class="pre">.</span></code> character).</p>
</div>
<p>In order to include hidden files, you need to start your pattern with a period character or specify the <code class="docutils literal"><span class="pre">hidden:</span> <span class="pre">true</span></code> option. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">expl1</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/path/.*&#39;</span> <span class="p">)</span>
<span class="n">expl2</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/path/.*.fa&#39;</span> <span class="p">)</span>
<span class="n">expl3</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/path/*&#39;</span><span class="p">,</span> <span class="n">hidden</span><span class="p">:</span> <span class="n">true</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first example returns all hidden files in the specified path. The second one returns all hidden files
ending with the <code class="docutils literal"><span class="pre">.fa</span></code> suffix. Finally the last example returns all files (hidden and non-hidden) in that path.</p>
<p>By default a <a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob">glob</a> pattern only looks for <cite>regular file</cite> paths that match the specified criteria, i.e.
it won't return directory paths.</p>
<p>You may use the parameter <code class="docutils literal"><span class="pre">type</span></code> specifying the value <code class="docutils literal"><span class="pre">file</span></code>, <code class="docutils literal"><span class="pre">dir</span></code> or <code class="docutils literal"><span class="pre">any</span></code> in order to define what kind of paths
you want. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myFileChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/path/*b&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;dir&#39;</span> <span class="p">)</span>
<span class="n">myFileChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="s1">&#39;/path/a*&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="p">:</span> <span class="s1">&#39;any&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first example will return all <cite>directory</cite> paths ending with the <code class="docutils literal"><span class="pre">b</span></code> suffix, while the second will return any file
and directory starting with a <code class="docutils literal"><span class="pre">a</span></code> prefix.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>glob</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> interprets characters <code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">?</span></code>, <code class="docutils literal"><span class="pre">[]</span></code> and <code class="docutils literal"><span class="pre">{}</span></code> as glob wildcards, otherwise handles them as normal characters (default: <code class="docutils literal"><span class="pre">true</span></code>)</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>Type of paths returned, either <code class="docutils literal"><span class="pre">file</span></code>, <code class="docutils literal"><span class="pre">dir</span></code> or <code class="docutils literal"><span class="pre">any</span></code> (default: <code class="docutils literal"><span class="pre">file</span></code>)</td>
</tr>
<tr class="row-even"><td>hidden</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> includes hidden files in the resulting paths (default: <code class="docutils literal"><span class="pre">false</span></code>)</td>
</tr>
<tr class="row-odd"><td>maxDepth</td>
<td>Maximum number of directory levels to visit (default: <cite>no limit</cite>)</td>
</tr>
<tr class="row-even"><td>followLinks</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> it follows symbolic links during directories tree traversal, otherwise they are managed as files (default: <code class="docutils literal"><span class="pre">true</span></code>)</td>
</tr>
<tr class="row-odd"><td>relative</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> returned paths are relative to the top-most common directory (default: <code class="docutils literal"><span class="pre">false</span></code>)</td>
</tr>
<tr class="row-even"><td>checkIfExists</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> throws an exception of the specified path do not exist in the file system (default: <code class="docutils literal"><span class="pre">false</span></code>)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>More than one path or glob pattern can be specified using a list as argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="n">fromPath</span><span class="p">(</span> <span class="p">[</span><span class="s1">&#39;/some/path/*.fq&#39;</span><span class="p">,</span> <span class="s1">&#39;/other/path/*.fastq&#39;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p class="last">(requires version 0.31.x or later)</p>
</div>
</div>
<div class="section" id="fromfilepairs">
<span id="channel-filepairs"></span><h3>fromFilePairs<a class="headerlink" href="#fromfilepairs" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">fromFilePairs</span></code> method creates a channel emitting the file pairs matching a <a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob">glob</a> pattern provided by the user.
The matching files are emitted as tuples in which the first element is the grouping key of the matching
pair and the second element is the list of files (sorted in lexicographical order). For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
    <span class="o">.</span><span class="n">fromFilePairs</span><span class="p">(</span><span class="s1">&#39;/my/data/SRR*_{1,2}.fastq&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">println</span><span class="p">()</span>
</pre></div>
</div>
<p>It will produce an output similar to the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SRR493366</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493366_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493366_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
<span class="p">[</span><span class="n">SRR493367</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493367_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493367_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
<span class="p">[</span><span class="n">SRR493368</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493368_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493368_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
<span class="p">[</span><span class="n">SRR493369</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493369_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493369_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
<span class="p">[</span><span class="n">SRR493370</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493370_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493370_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
<span class="p">[</span><span class="n">SRR493371</span><span class="p">,</span> <span class="p">[</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493371_1</span><span class="o">.</span><span class="n">fastq</span><span class="p">,</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">SRR493371_2</span><span class="o">.</span><span class="n">fastq</span><span class="p">]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The glob pattern must contain at least a star wildcard character.</p>
</div>
<p>Alternatively it is possible to implement a custom file pair grouping strategy providing a closure which,
given the current file as parameter, returns the grouping key.
For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
    <span class="o">.</span><span class="n">fromFilePairs</span><span class="p">(</span><span class="s1">&#39;/some/data/*&#39;</span><span class="p">,</span> <span class="n">size</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span> <span class="o">-&gt;</span> <span class="n">file</span><span class="o">.</span><span class="n">extension</span> <span class="p">}</span>
    <span class="o">.</span><span class="n">println</span> <span class="p">{</span> <span class="n">ext</span><span class="p">,</span> <span class="n">files</span> <span class="o">-&gt;</span> <span class="s2">&quot;Files with the extension $ext are $files&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Table of optional parameters available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>type</td>
<td>Type of paths returned, either <code class="docutils literal"><span class="pre">file</span></code>, <code class="docutils literal"><span class="pre">dir</span></code> or <code class="docutils literal"><span class="pre">any</span></code> (default: <code class="docutils literal"><span class="pre">file</span></code>)</td>
</tr>
<tr class="row-odd"><td>hidden</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> includes hidden files in the resulting paths (default: <code class="docutils literal"><span class="pre">false</span></code>)</td>
</tr>
<tr class="row-even"><td>maxDepth</td>
<td>Maximum number of directory levels to visit (default: <cite>no limit</cite>)</td>
</tr>
<tr class="row-odd"><td>followLinks</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> it follows symbolic links during directories tree traversal, otherwise they are managed as files (default: <code class="docutils literal"><span class="pre">true</span></code>)</td>
</tr>
<tr class="row-even"><td>size</td>
<td>Defines the number of files each emitted item is expected to hold (default: 2). Set to <code class="docutils literal"><span class="pre">-1</span></code> for any.</td>
</tr>
<tr class="row-odd"><td>flat</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> the matching files are produced as sole elements in the emitted tuples (default: <code class="docutils literal"><span class="pre">false</span></code>).</td>
</tr>
<tr class="row-even"><td>checkIfExists</td>
<td>When <code class="docutils literal"><span class="pre">true</span></code> throws an exception of the specified path do not exist in the file system (default: <code class="docutils literal"><span class="pre">false</span></code>)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>More than one glob pattern can be specified using a list as argument:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="n">fromFilePairs</span><span class="p">(</span> <span class="p">[</span><span class="s1">&#39;/some/data/SRR*_{1,2}.fastq&#39;</span><span class="p">,</span> <span class="s1">&#39;/other/data/QFF*_{1,2}.fastq&#39;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p class="last">(requires version 0.31.x or later)</p>
</div>
</div>
<div class="section" id="fromsra">
<span id="channel-fromsra"></span><h3>fromSRA<a class="headerlink" href="#fromsra" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">fromSRA</span></code> method queries the <a class="reference external" href="https://www.ncbi.nlm.nih.gov/sra">NCBI SRA</a> database and returns a channel emitting
the FASTQ files matching the specified criteria i.e project or accession number(s). For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
    <span class="o">.</span><span class="n">fromSRA</span><span class="p">(</span><span class="s1">&#39;SRP043510&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">println</span><span class="p">()</span>
</pre></div>
</div>
<p>It returns:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SRR1448794</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR144</span><span class="o">/</span><span class="mi">004</span><span class="o">/</span><span class="n">SRR1448794</span><span class="o">/</span><span class="n">SRR1448794</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">[</span><span class="n">SRR1448795</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR144</span><span class="o">/</span><span class="mi">005</span><span class="o">/</span><span class="n">SRR1448795</span><span class="o">/</span><span class="n">SRR1448795</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">[</span><span class="n">SRR1448792</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR144</span><span class="o">/</span><span class="mi">002</span><span class="o">/</span><span class="n">SRR1448792</span><span class="o">/</span><span class="n">SRR1448792</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">[</span><span class="n">SRR1448793</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR144</span><span class="o">/</span><span class="mi">003</span><span class="o">/</span><span class="n">SRR1448793</span><span class="o">/</span><span class="n">SRR1448793</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">[</span><span class="n">SRR1910483</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR191</span><span class="o">/</span><span class="mi">003</span><span class="o">/</span><span class="n">SRR1910483</span><span class="o">/</span><span class="n">SRR1910483</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">[</span><span class="n">SRR1910482</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">SRR191</span><span class="o">/</span><span class="mi">002</span><span class="o">/</span><span class="n">SRR1910482</span><span class="o">/</span><span class="n">SRR1910482</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]</span>
<span class="p">(</span><span class="n">remaining</span> <span class="n">omitted</span><span class="p">)</span>
</pre></div>
</div>
<p>Multiple accession IDs can be specified using a list object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ERR908507&#39;</span><span class="p">,</span> <span class="s1">&#39;ERR908506&#39;</span><span class="p">,</span> <span class="s1">&#39;ERR908505&#39;</span><span class="p">]</span>
<span class="n">Channel</span>
    <span class="o">.</span><span class="n">fromSRA</span><span class="p">(</span><span class="n">ids</span><span class="p">)</span>
    <span class="o">.</span><span class="n">println</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ERR908507</span><span class="p">,</span> <span class="p">[</span><span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908507</span><span class="o">/</span><span class="n">ERR908507_1</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908507</span><span class="o">/</span><span class="n">ERR908507_2</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]]</span>
<span class="p">[</span><span class="n">ERR908506</span><span class="p">,</span> <span class="p">[</span><span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908506</span><span class="o">/</span><span class="n">ERR908506_1</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908506</span><span class="o">/</span><span class="n">ERR908506_2</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]]</span>
<span class="p">[</span><span class="n">ERR908505</span><span class="p">,</span> <span class="p">[</span><span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908505</span><span class="o">/</span><span class="n">ERR908505_1</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">,</span> <span class="n">ftp</span><span class="p">:</span><span class="o">//</span><span class="n">ftp</span><span class="o">.</span><span class="n">sra</span><span class="o">.</span><span class="n">ebi</span><span class="o">.</span><span class="n">ac</span><span class="o">.</span><span class="n">uk</span><span class="o">/</span><span class="n">vol1</span><span class="o">/</span><span class="n">fastq</span><span class="o">/</span><span class="n">ERR908</span><span class="o">/</span><span class="n">ERR908505</span><span class="o">/</span><span class="n">ERR908505_2</span><span class="o">.</span><span class="n">fastq</span><span class="o">.</span><span class="n">gz</span><span class="p">]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Read pairs are implicitly managed are returned as a list of files.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Behind the scene it's uses the NCBI <a class="reference external" href="https://www.ncbi.nlm.nih.gov/books/NBK25499/#chapter4.ESearch">ESearch</a>
API, therefore the <code class="docutils literal"><span class="pre">fromSRA</span></code> method allow the usage of any query term supported by this API.</p>
</div>
<p>Table of optional parameters available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>apiKey</td>
<td>NCBI user API key.</td>
</tr>
<tr class="row-odd"><td>cache</td>
<td>Enable/disable the caching API requests (default: <code class="docutils literal"><span class="pre">true</span></code>).</td>
</tr>
<tr class="row-even"><td>max</td>
<td>Maximum number of entries that can be retried (default: unlimited) .</td>
</tr>
</tbody>
</table>
<p>To access the NCBI search service the <a class="reference external" href="https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities">NCBI API keys</a>
should be provided either:</p>
<ul class="simple">
<li>Using the <code class="docutils literal"><span class="pre">apiKey</span></code> optional parameter e.g. <code class="docutils literal"><span class="pre">Channel.fromSRA(ids,</span> <span class="pre">apiKey:'0123456789abcdef')</span></code>.</li>
<li>Exporting the <code class="docutils literal"><span class="pre">NCBI_API_KEY</span></code> variable in your environment e.g. <code class="docutils literal"><span class="pre">export</span> <span class="pre">NCBI_API_KEY=0123456789abcdef</span></code>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature requires Nextflow version 19.04.0 or later.</p>
</div>
</div>
<div class="section" id="watchpath">
<span id="channel-watch"></span><h3>watchPath<a class="headerlink" href="#watchpath" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">watchPath</span></code> method watches a folder for one or more files matching a specified pattern. As soon as
there is a file that meets the specified condition, it is emitted over the channel that is returned by the <code class="docutils literal"><span class="pre">watchPath</span></code>
method. The condition on files to watch can be specified by using <code class="docutils literal"><span class="pre">*</span></code> or <code class="docutils literal"><span class="pre">?</span></code> wildcard characters i.e. by specifying
a <a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob">glob</a> path matching criteria.</p>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
   <span class="o">.</span><span class="n">watchPath</span><span class="p">(</span> <span class="s1">&#39;/path/*.fa&#39;</span> <span class="p">)</span>
   <span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span> <span class="n">println</span> <span class="s2">&quot;Fasta file: $it&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>By default it watches only for new files created in the specified folder. Optionally, it is possible to provide a
second argument that specifies what event(s) to watch. The supported events are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">create</span></code></td>
<td>A new file is created (default)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">modify</span></code></td>
<td>A file is modified</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">delete</span></code></td>
<td>A file is deleted</td>
</tr>
</tbody>
</table>
<p>You can specified more than one of these events by using a comma separated string as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
   <span class="o">.</span><span class="n">watchPath</span><span class="p">(</span> <span class="s1">&#39;/path/*.fa&#39;</span><span class="p">,</span> <span class="s1">&#39;create,modify&#39;</span> <span class="p">)</span>
   <span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span> <span class="n">println</span> <span class="s2">&quot;File created or modified: $it&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">watchPath</span></code> factory waits endlessly for files that match the specified pattern and event(s).
Thus, whenever you use it in your script, the resulting pipeline will never finish.</p>
</div>
<p>See also: <a class="reference internal" href="#frompath">fromPath</a> factory method.</p>
</div>
<div class="section" id="empty">
<span id="channel-empty"></span><h3>empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">empty</span></code> factory method, by definition, creates a channel that doesn't emit any value.</p>
<p>See also: <a class="reference internal" href="operator.html#operator-ifempty"><span class="std std-ref">ifEmpty</span></a> and <a class="reference internal" href="operator.html#operator-close"><span class="std std-ref">close</span></a> operators.</p>
</div>
</div>
<div class="section" id="binding-values">
<h2>Binding values<a class="headerlink" href="#binding-values" title="Permalink to this headline">¶</a></h2>
<p>Since in <cite>Nextflow</cite> channels are implemented using <cite>dataflow</cite> variables or queues. Thus sending a message
is equivalent to <cite>bind</cite> a value to object representing the communication channel.</p>
<div class="section" id="bind">
<h3>bind( )<a class="headerlink" href="#bind" title="Permalink to this headline">¶</a></h3>
<p>Channel objects provide a <cite>bind( )</cite> method which is the basic operation to send a message over the channel.
For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">myChannel</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span> <span class="s1">&#39;Hello world&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="operator">
<h3>operator &lt;&lt;<a class="headerlink" href="#operator" title="Permalink to this headline">¶</a></h3>
<p>The operator <code class="docutils literal"><span class="pre">&lt;&lt;</span></code> is just a syntax sugar for the <cite>bind( )</cite> method. Thus, the following example produce
an identical result as the previous one:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">myChannel</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
<span class="n">myChannel</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;Hello world&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="observing-events">
<h2>Observing events<a class="headerlink" href="#observing-events" title="Permalink to this headline">¶</a></h2>
<div class="section" id="subscribe">
<span id="channel-subscribe"></span><h3>subscribe( )<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">subscribe(</span> <span class="pre">)</span></code> method permits to execute a user define function each time a new value is emitted by the source channel.</p>
<p>The emitted value is passed implicitly to the specified function. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">define</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">emitting</span> <span class="n">three</span> <span class="n">values</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">Channel</span><span class="o">.</span><span class="kn">from</span> <span class="p">(</span> <span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span> <span class="p">)</span>

<span class="o">//</span> <span class="n">subscribe</span> <span class="n">a</span> <span class="n">function</span> <span class="n">to</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">emitted</span> <span class="n">values</span>
<span class="n">source</span><span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span>  <span class="n">println</span> <span class="s2">&quot;Got: $it&quot;</span>  <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Got</span><span class="p">:</span> <span class="n">alpha</span>
<span class="n">Got</span><span class="p">:</span> <span class="n">beta</span>
<span class="n">Got</span><span class="p">:</span> <span class="n">delta</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Formally the user defined function is a <code class="docutils literal"><span class="pre">Closure</span></code> as defined by the Groovy programming language on which
the <cite>Nextflow</cite> scripts are based on.</p>
</div>
<p>If needed the closure parameter can be defined explicitly, using a name other than <code class="docutils literal"><span class="pre">it</span></code> and, optionally,
specifying the expected value type, as showed in the following example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
    <span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="s1">&#39;alpha&#39;</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">,</span> <span class="s1">&#39;lambda&#39;</span> <span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span> <span class="n">String</span> <span class="nb">str</span> <span class="o">-&gt;</span>
        <span class="n">println</span> <span class="s2">&quot;Got: $</span><span class="si">{str}</span><span class="s2">; len: ${str.size()}&quot;</span>
     <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Got</span><span class="p">:</span> <span class="n">alpha</span><span class="p">;</span> <span class="nb">len</span><span class="p">:</span> <span class="mi">5</span>
<span class="n">Got</span><span class="p">:</span> <span class="n">beta</span><span class="p">;</span> <span class="nb">len</span><span class="p">:</span> <span class="mi">4</span>
<span class="n">Got</span><span class="p">:</span> <span class="k">lambda</span><span class="p">;</span> <span class="nb">len</span><span class="p">:</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Read <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">Closures</span></a> paragraph to learn more about <cite>closure</cite> feature.</p>
</div>
<div class="section" id="onnext-oncomplete-and-onerror">
<h3>onNext, onComplete, and onError<a class="headerlink" href="#onnext-oncomplete-and-onerror" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">subscribe()</span></code> method may accept one or more of the following event handlers:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">onNext</span></code>: registers a function that is invoked whenever the channel emits a value.
This is the same as using the <code class="docutils literal"><span class="pre">subscribe(</span> <span class="pre">)</span></code> with a <cite>plain</cite> closure as describe in the examples above.</li>
<li><code class="docutils literal"><span class="pre">onComplete</span></code>: registers a function that is invoked after the <cite>last</cite> value is emitted by the channel.</li>
<li><code class="docutils literal"><span class="pre">onError</span></code>: registers a function that it is invoked when an exception is raised while handling the
<code class="docutils literal"><span class="pre">onNext</span></code> event. It will not make further calls to <code class="docutils literal"><span class="pre">onNext</span></code> or <code class="docutils literal"><span class="pre">onComplete</span></code>.
The <code class="docutils literal"><span class="pre">onError</span></code> method takes as its parameter the <code class="docutils literal"><span class="pre">Throwable</span></code> that caused the error.</li>
</ul>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Channel</span>
    <span class="o">.</span><span class="n">from</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span> <span class="n">onNext</span><span class="p">:</span> <span class="p">{</span> <span class="n">println</span> <span class="n">it</span> <span class="p">},</span> <span class="n">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="n">println</span> <span class="s1">&#39;Done.&#39;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="n">Done</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="operator.html" class="btn btn-neutral float-right" title="Operators" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="process.html" class="btn btn-neutral" title="Processes" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2019, Centre for Genomic Regulation (CRG).
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'https://www.nextflow.io/docs/latest/index.html',
            VERSION:'19.04.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

  <script>
  if( window.location.hostname == 'localhost' || window.location.hostname == '127.0.0.1' ) { throw new Error('Skip GA on localhost') };
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-364526-10', 'auto');
  ga('send', 'pageview');
  </script>
</body>
</html>